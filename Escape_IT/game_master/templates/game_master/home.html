{% extends 'game_master/base.html' %}

{% block content %}
    <div class="active-games">
        <p>number of active games : 4</p>
        <p>games that require your attention : 0</p>
    </div>

    <div class="rooms-layout">
        {% for room in rooms %}
        <div class="room">
            <img src="../../static/img/placeholder.jpg" class="photo">
            <div class="room-text">
                <p class="room-number">{{room.room_name}}</p>
                <p>starting time : 12:00</p>
                <p>progress : 40%</p>
                <a class="room-panel-button" href="/rooms/{{ room.id }}">
                    <p>room panel</p>
                </a>
            </div>
        </div>
        {% endfor %}
    </div>

    <form id="form">
        <input type="text" name="hint">
    </form>

    <script type="text/javascript">
        console.log('Halo!')

        let url = `ws://${window.location.host}/ws/socket-server/`

        const chatSocket = new WebSocket(url);

        chatSocket.onmessage = function(e){
            let data = JSON.parse(e.data)
            console.log('Data:', data)
        }

        let form = document.getElementById('form');
        form.addEventListener('submit', (e)=> {
            e.preventDefault()
            let hint = e.target.hint.value;
            chatSocket.send(JSON.stringify({
                'hint':hint
            }))
            form.reset()
        })
    </script>

{% endblock content %}
